@model SoftfyWeb.Dtos.UsuarioRegistroDto
@{
    ViewData["Title"] = "Registrarse";
}

<style>

    .form-wrapper {
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .form-card {
        background-color: #2c2c2c;
        border: 2px solid #00f2ff44;
        border-radius: 15px;
        padding: 40px;
        width: 100%;
        max-width: 400px;
        box-shadow: 0 0 30px rgba(0, 255, 255, 0.08);
    }

        .form-card h3 {
            color: white;
            text-align: center;
            margin-bottom: 25px;
        }

    .form-control, .form-select {
        background-color: #111;
        color: white;
        border: 1px solid #00f2ff;
        border-radius: 8px;
    }

        .form-control:focus, .form-select:focus {
            box-shadow: 0 0 10px #1db95455;
            border-color: #1db954;
        }

    .btn-success {
        background-color: #1db954;
        border: none;
        transition: 0.3s;
    }

        .btn-success:hover {
            background-color: #17a44b;
        }

    .text-link {
        color: #1db9ff;
        text-decoration: none;
    }

        .text-link:hover {
            text-decoration: underline;
        }

    .alert-info {
        background-color: #0d6efd33;
        border: 1px solid #0d6efd;
        color: white;
    }
</style>

<div class="form-wrapper">
    <div class="form-card">
        <h3>Registrarse</h3>

        @* Mostrar mensaje de éxito *@
        @if (TempData["RegistroOk"] != null)
        {
            <div class="alert alert-info text-center">
                @TempData["RegistroOk"]
            </div>
        }

        <form asp-action="Registro" method="post">
            <div asp-validation-summary="All" class="text-danger mb-3"></div>

            <input asp-for="Nombre" class="form-control mb-2" placeholder="Nombre" />
            <input asp-for="Apellido" class="form-control mb-2" placeholder="Apellido" />
            <input asp-for="Email" class="form-control mb-2" placeholder="Correo electrónico" type="email" />
            <input asp-for="Password" class="form-control mb-3" placeholder="Contraseña" type="password" />

            <select asp-for="TipoUsuario" class="form-select mb-3" id="TipoUsuario" onchange="mostrarFormulario()">
                <option value="Oyente">Oyente</option>
                <option value="Artista">Artista</option>
            </select>

            <div id="formArtista" style="display:none;">
                <input asp-for="NombreArtistico" class="form-control mb-3" placeholder="Nombre Artístico" />
            </div>

            <div id="formOyente" style="display:none;">
                <p class="text-white small mb-2">Formulario de oyente</p>
                <!-- Puedes agregar más campos si los necesitas -->
            </div>

            <button type="submit" class="btn btn-success w-100">Registrarse</button>
        </form>

        <p class="text-center text-white mt-3">
            ¿Ya tienes cuenta?
            <a asp-action="Login" class="text-link">Iniciar sesión</a>
        </p>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        function mostrarFormulario() {
            const tipoUsuario = document.getElementById("TipoUsuario").value;
            document.getElementById("formArtista").style.display = (tipoUsuario === "Artista") ? "block" : "none";
            document.getElementById("formOyente").style.display = (tipoUsuario === "Oyente") ? "block" : "none";
        }

        window.onload = mostrarFormulario;
    </script>
}
